<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/avatar.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/avatar.jpg">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"grange007.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="CAUTION WET FLOOR">
<meta property="og:type" content="website">
<meta property="og:title" content="Grange&#39;s blog">
<meta property="og:url" content="https://grange007.github.io/index.html">
<meta property="og:site_name" content="Grange&#39;s blog">
<meta property="og:description" content="CAUTION WET FLOOR">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Grange">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://grange007.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Grange's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Grange's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://grange007.github.io/2024/04/08/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E6%96%87%E6%A1%A3%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Grange">
      <meta itemprop="description" content="CAUTION WET FLOOR">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Grange's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/04/08/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E6%96%87%E6%A1%A3%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA/" class="post-title-link" itemprop="url">从零开始的文档网站搭建</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-04-08 20:00:00" itemprop="dateCreated datePublished" datetime="2024-04-08T20:00:00+08:00">2024-04-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-04-13 14:27:05" itemprop="dateModified" datetime="2024-04-13T14:27:05+08:00">2024-04-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="从零开始的文档网站搭建——以Tinker-Docs为例"><a href="#从零开始的文档网站搭建——以Tinker-Docs为例" class="headerlink" title="从零开始的文档网站搭建——以Tinker Docs为例"></a>从零开始的文档网站搭建——以Tinker Docs为例</h1><p>无论是要搭建个人博客还是团队知识库，一个文档网站都是必不可少的。一个优秀的文档网站能让我们方便快捷地上传文档资料，清晰地组织文档架构，同时支持多语言、链接跳转、界面个性化等多种多样的功能。本文将以 <a target="_blank" rel="noopener" href="https://tinkerfuroc.github.io/tinkerdocs/">Tinker Docs</a> 的搭建过程为例，介绍如何基于 <a target="_blank" rel="noopener" href="https://docusaurus.io/">Docusaurus</a> 和 <a target="_blank" rel="noopener" href="https://pages.github.com/">Github Pages</a> 完成一个基本的文档网站的部署。</p>
<h2 id="一、静态网站生成器"><a href="#一、静态网站生成器" class="headerlink" title="一、静态网站生成器"></a>一、静态网站生成器</h2><p>想要搭建文档网站，首先的问题就是——我要如何方便快捷地发布我的文档？毕竟，文档网站的核心是文档的内容产出，并不需要多么炫酷的前端界面。倘若对于我的每一份文档，我都需要为它写一套前端代码，来显示和组织其中的各个元素，这显然有点太过折磨人了。</p>
<p>为此，静态网站生成器应运而生。通过静态网站生成器，我们可以轻松地通过 Markdown 或其他轻量级标记语言来编写文档并发布至网站中，从而大大减小了文档网站的发布工作量。</p>
<p>想要理解静态网站生成器，我们首先需要知道什么是静态网站。静态网站是由静态网页组成的网站，这些网页是预先编写好的，存储在服务器上的文件，其中的每个文件都对应一个网页。当用户请求一个网页时，服务器会将对应的文件发送给用户的浏览器，将这一页面呈现出来。静态网页的内容在服务器上是固定的，不会因为用户的请求而改变。与静态网站相对的就是动态网站。动态网站的内容会根据用户的请求实时生成。当用户请求一个网页时，服务器会运行一些脚本，可能会查询数据库，然后生成对应的网页发送给用户。动态网站的内容会根据用户的请求、用户的输入、当前的时间等因素进行变化。</p>
<p>文档网站通常都属于静态网站。文档网站的主要功能是静态文档的呈现，对于动态交互等功能需求较少。这一特点使得静态网站生成器能很方便地将我们的文本文件转化为静态网站上的页面。</p>
<p>静态网站生成器的工作流程通常如下：</p>
<ol>
<li>用户在文本文件中编写内容，可能使用 Markdown 或其他轻量级标记语言。</li>
<li>用户可能会使用一些模板，这些模板定义了网页的布局和样式。</li>
<li>用户运行静态网站生成器，生成器读取文本文件和模板，生成静态 HTML 文件。</li>
<li>生成的 HTML 文件可以直接部署到任何能够提供静态内容的 web 服务器上。</li>
</ol>
<h2 id="二、Docusaurus-简介"><a href="#二、Docusaurus-简介" class="headerlink" title="二、Docusaurus 简介"></a>二、Docusaurus 简介</h2><h3 id="概览"><a href="#概览" class="headerlink" title="概览"></a>概览</h3><p>市面上常用的静态网页生成器有很多，包括 <a target="_blank" rel="noopener" href="https://hexo.io/docs/">Hexo</a>（常用于搭建个人博客）、<a target="_blank" rel="noopener" href="https://www.mkdocs.org/">MkDocs</a>（常用于搭建技术文档）、<a target="_blank" rel="noopener" href="https://vuepress.vuejs.org/">VuePress</a>（由 Vue.js 支持的静态网站生成工具）等。Tinker Docs 采用了 <a target="_blank" rel="noopener" href="https://docusaurus.io/">Docusaurus</a> 作为静态网页生成器。</p>
<p>Docusaurus是一个由Facebook开发的开源静态网页生成器，支持编写技术文档、博客等多种功能。Docusaurus 对 React 和 Markdown 均有着较好的支持，这也使得它在 Markdown 的基础上能提供相当丰富的显示功能。</p>
<p>以下，我们将介绍 Docusaurus 的基本使用流程。</p>
<h3 id="项目创建"><a href="#项目创建" class="headerlink" title="项目创建"></a>项目创建</h3><p>我们可以使用<code>npx</code>来创建一个 Docusaurus 项目。（要求 Node.js 版本为 18.0 或更高版本，可以通过运行 <code>node -v</code> 进行检查）。使用<code>npx</code>的初始化命令（推荐使用）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-docusaurus@latest &lt;website_name&gt; classic</span><br></pre></td></tr></table></figure>

<p>也可以选择其它包管理器进行初始化。</p>
<p>使用<code>npm</code>的初始化命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init docusaurus</span><br></pre></td></tr></table></figure>

<p>使用<code>yarn</code>的初始化命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn create docusaurus</span><br></pre></td></tr></table></figure>

<h3 id="添加页面"><a href="#添加页面" class="headerlink" title="添加页面"></a>添加页面</h3><p>Docusaurus 的典型项目结构如下（以项目<code>my-website</code>为例）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">my-website</span><br><span class="line">├── blog</span><br><span class="line">│   ├── 2019-05-28-hola.md</span><br><span class="line">│   ├── 2019-05-29-hello-world.md</span><br><span class="line">│   └── 2020-05-30-welcome.md</span><br><span class="line">├── docs</span><br><span class="line">│   ├── doc1.md</span><br><span class="line">│   ├── doc2.md</span><br><span class="line">│   ├── doc3.md</span><br><span class="line">│   ├── subfold</span><br><span class="line">│   │	├── _category.json</span><br><span class="line">│   │	└── subdoc.md</span><br><span class="line">│   └── mdx.md</span><br><span class="line">├── src</span><br><span class="line">│   ├── css</span><br><span class="line">│   │   └── custom.css</span><br><span class="line">│   └── pages</span><br><span class="line">│       ├── styles.module.css</span><br><span class="line">│       └── index.js</span><br><span class="line">├── static</span><br><span class="line">│   └── img</span><br><span class="line">├── docusaurus.config.js</span><br><span class="line">├── package.json</span><br><span class="line">├── README.md</span><br><span class="line">├── sidebars.js</span><br><span class="line">└── yarn.lock</span><br></pre></td></tr></table></figure>

<ul>
<li><code>/blog/</code> - 包含博客的 Markdown 文件。</li>
<li><code>/docs/</code> - 包含文档的 Markdown 文件。可通过自定义 <code>sidebars.js</code> 改变<code>/docs/</code>中的文档在侧边栏的顺序。</li>
<li><code>/src/</code> - 非文档文件，例如页面和自定义 React 组件。不必严格将非文档文件放在这里，但是将它们放在集中目录下可以更方便进行处理。<ul>
<li><code>/src/pages</code> - 此目录中的任何 JSX&#x2F;TSX&#x2F;MDX 文件都将转换为网站页面。</li>
</ul>
</li>
<li><code>/static/</code> - 静态目录。这里的任何内容都将被复制到最终 <code>build</code> 目录的根目录中。</li>
<li><code>/docusaurus.config.js</code> - 包含站点配置的配置文件。</li>
<li><code>/package.json</code> - Docusaurus 网站是一个 React 应用程序，您可以在其中安装和使用需要的 npm 软件包。</li>
<li><code>/sidebars.js</code> - 用来指定侧边栏中文档的顺序</li>
</ul>
<p>如果要添加文档，只需向<code>/blog/</code>或<code>/docs/</code>中添加相应的 Markdown 或 React 文件，即可在网站中增添相应的页面。</p>
<p>如需对文档进行分类，只需在<code>/docs/</code>文件夹下新建子文件夹（如项目结构中的<code>/subfold/</code>），便可在网站中起到相应的文档归类作用。在子文件夹中可添加文件<code>_category_.json</code>，用以起到对整个子文件夹页面的组织、介绍作用。</p>
<p>Tinker Docs 中的<code>/docs/Hardware/_category_.json</code>文件：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;硬件&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;position&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;generated-index&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;电路、机械结构设计相关知识&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>对应的子文件夹介绍页面：<a target="_blank" rel="noopener" href="https://tinkerfuroc.github.io/tinkerdocs/docs/category/%E7%A1%AC%E4%BB%B6">硬件 | Tinker Docs</a></p>
<h3 id="本地预览"><a href="#本地预览" class="headerlink" title="本地预览"></a>本地预览</h3><p>当完成文档编写后，在正式向网站发布之前，我们可以通过运行本地开发服务器来预览自己的网站，并实时进行更改。</p>
<p>我们可通过如下命令进行网站预览：</p>
<p>使用<code>npm</code>的命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd &lt;website_name&gt;</span><br><span class="line">npm run start</span><br></pre></td></tr></table></figure>

<p>使用<code>yarn</code>的命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd &lt;website_name&gt;</span><br><span class="line">yarn run start</span><br></pre></td></tr></table></figure>

<p>这样，一个浏览器窗口将会在<code>http://localhost:3000/&lt;website_name&gt;</code>打开，我们可预览自己的网站，并进行实时的更改。</p>
<h3 id="构建网站"><a href="#构建网站" class="headerlink" title="构建网站"></a>构建网站</h3><p>生成静态网站的最后一步就是对网站进行构建。构建网站的过程可以将我们的 Markdown 文档转化为<code>html</code>文件，从而生成我们需要的静态网页。</p>
<p>我们可通过如下命令进行网站构建：</p>
<p>使用<code>npm</code>的命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>

<p>使用<code>yarn</code>的命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn build</span><br></pre></td></tr></table></figure>

<p>构建后的内容将在<code>/build</code>中生成，其中包含了由我们的 Markdown 文档转化而来的<code>html</code>文件。将<code>/build</code>文件夹中的内容复制到静态网站托管服务，从而实现网站部署。这也就进入了我们的下一章节——如何部署我们的网站。</p>
<h2 id="三、基于-Github-Pages-的网站部署"><a href="#三、基于-Github-Pages-的网站部署" class="headerlink" title="三、基于 Github Pages 的网站部署"></a>三、基于 Github Pages 的网站部署</h2><h3 id="本地测试"><a href="#本地测试" class="headerlink" title="本地测试"></a>本地测试</h3><p>当完成网站的构建后，在将网站部署到生产环境之前，我们可以先在本地测试构建后的网站是否正常。</p>
<p>我们可通过如下命令进行网站构建：</p>
<p>使用<code>npm</code>的命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run serve</span><br></pre></td></tr></table></figure>

<p>使用<code>yarn</code>的命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn serve</span><br></pre></td></tr></table></figure>

<p>如果运行正常，我们构建后的网站将会在<code>http://localhost:3000/&lt;website_name&gt;</code>打开，我们可检查自己的网站构建是否正常。</p>
<blockquote>
<p>这里的<code>npm run serve</code>与上文的<code>npm run start</code>的区别是：<code>npm run serve</code> 呈现出的是在网站构建完成后<code>/build</code>文件夹中的静态页面，不支持实时的更改和预览；<code>npm run start</code>则是基于整个项目的网站预览，由项目文件夹生成，可以进行实时的更改和预览。</p>
</blockquote>
<h3 id="网站托管"><a href="#网站托管" class="headerlink" title="网站托管"></a>网站托管</h3><p>在这之后，我们可以着手进行我们的网站托管。常见的托管方式包括以下两种：</p>
<ol>
<li>使用 Apache2, Nginx 等 HTTP 服务器进行自托管。</li>
<li>基于 Jamstack 提供商进行托管（如 Netlify, Vercel, Github Pages 等）。</li>
</ol>
<p>以下将主要介绍如何基于 Github Pages 完成网站的托管。这是一种简便、免费的网站部署方式，且可以非常方便地应用于其他 Github 项目。</p>
<p>通常，使用 Github Pages 发布网站的过程涉及两个仓库（或是两个分支）：包含源文件的分支，称为源分支；以及包含网站项目构建完成后的文件（也就是<code>/build/</code>）中的内容，准备通过 Github Pages 进行部署的分支，称为部署分支。</p>
<p>每个 GitHub 仓库都和一个 GitHub Pages 服务关联。其站点域名与仓库名关联如下：</p>
<ul>
<li>对于组织名或个人名是<code>my-org</code>的账号，如果其有一个名字为<code>my-org.github.io</code>的仓库，那个这个仓库经过 Github Pages 部署后的站点域名为 <code>https://my-org.github.io/</code> 。</li>
<li>对于组织名或个人名是<code>my-org</code>的账号，如果其有一个名字不为<code>my-org.github.io</code>的仓库<code>my-project</code>，那个这个仓库经过 Github Pages 部署后的站点域名为<code>https://my-org.github.io/my-project/</code> 。</li>
</ul>
<p>也就是说，组织或个人的每个仓库都可通过 Github Pages 进行部署，不过只有名为<code>my-org.github.io</code>的指定仓库经过 Github Pages 部署后可以作为网站的根目录<code>my-org.github.io</code>，其余名称的网站都只能作为<code>my-org.github.io</code>的子目录。</p>
<p>GitHub Pages会从默认分支（通常是<code>master</code> &#x2F; <code>main</code>）或<code>gh-pages</code>分支中获取准备部署的文件（即<code>docusaurus build</code>的输出），该分支即为部署分支。Github Pages 也可选择发布该分支中的<code>/</code>（根目录）或是<code>/docs/</code>。部署 Docusaurus 网站时，我们一般选择发布根目录。 <a target="_blank" rel="noopener" href="https://github.com/tinkerfuroc/tinkerdocs">tinkerdocs</a> 仓库将<code>main</code>分支作为了源分支，将<code>gh-pages</code>分支作为了部署分支。其具体选项可在 <a target="_blank" rel="noopener" href="https://github.com/tinkerfuroc/tinkerdocs/settings/pages">tinkerdocs-&gt;Settings-&gt;Pages</a> 中查看与配置。</p>
<h3 id="项目配置"><a href="#项目配置" class="headerlink" title="项目配置"></a>项目配置</h3><p>在这之后，我们需要在<code>docusaurus.config.js</code>中完成一些与项目部署和 Github Pages 有关的配置，Tinker Docs 中与网站部署有关的配置具体如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const config = <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">// Set the production url of your site here</span></span><br><span class="line">  url<span class="punctuation">:</span> &#x27;https<span class="punctuation">:</span><span class="comment">//tinkerfuroc.github.io/&#x27;,</span></span><br><span class="line">  <span class="comment">// Set the /&lt;baseUrl&gt;/ pathname under which your site is served</span></span><br><span class="line">  <span class="comment">// For GitHub pages deployment, it is often &#x27;/&lt;projectName&gt;/&#x27;</span></span><br><span class="line">  baseUrl<span class="punctuation">:</span> &#x27;/tinkerdocs/&#x27;<span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// GitHub pages deployment config.</span></span><br><span class="line">  <span class="comment">// If you aren&#x27;t using GitHub pages, you don&#x27;t need these.</span></span><br><span class="line">  organizationName<span class="punctuation">:</span> &#x27;tinkerfuroc&#x27;<span class="punctuation">,</span> <span class="comment">// Usually your GitHub org/user name.</span></span><br><span class="line">  projectName<span class="punctuation">:</span> &#x27;Tinker_docs&#x27;<span class="punctuation">,</span> <span class="comment">// Usually your repo name.</span></span><br><span class="line">  trailingSlash<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  onBrokenLinks<span class="punctuation">:</span> &#x27;throw&#x27;<span class="punctuation">,</span></span><br><span class="line">  onBrokenMarkdownLinks<span class="punctuation">:</span> &#x27;warn&#x27;<span class="punctuation">,</span></span><br><span class="line">  ...</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>其中有一些需要注意的配置：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>介绍</th>
</tr>
</thead>
<tbody><tr>
<td><code>url</code></td>
<td>网站的url。对于部署在 <code>https://my-org.com/my-project/</code> 的站点， <code>url</code> 是 <code>https://my-org.com/</code> 。</td>
</tr>
<tr>
<td><code>baseUrl</code></td>
<td>项目的基本 URL，末尾带有斜杠。对于部署在 <code>https://my-org.com/my-project/</code> 的站点， <code>baseUrl</code> 是 <code>/my-project/</code> 。</td>
</tr>
<tr>
<td><code>organizationName</code></td>
<td>拥有网站仓库的 GitHub 个人或组织。</td>
</tr>
<tr>
<td><code>projectName</code></td>
<td>Github 上网站仓库的名称。</td>
</tr>
<tr>
<td><code>deploymentBranch</code></td>
<td>部署分支的名称。对于<code>projectName</code> 不以 <code>.github.io</code> 结尾的 GitHub Pages 存储库，它默认为 <code>gh-pages</code> 。否则，它需要明确指定。</td>
</tr>
</tbody></table>
<h3 id="网站部署"><a href="#网站部署" class="headerlink" title="网站部署"></a>网站部署</h3><p>最后，我们就可以进入激动人心的网站部署环节了。Docusaurus 为我们提供了 <code>deploy</code> 命令，能自动完成构建项目、推送至仓库、发布网站等任务。</p>
<p>使用<code>bash</code>的命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GIT_USER=&lt;GITHUB_USERNAME&gt; yarn deploy</span><br></pre></td></tr></table></figure>

<p>使用 Windows <code>cmd</code>的命令：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmd /C <span class="string">&quot;set &quot;</span>GIT_USER=&lt;GITHUB_USERNAME&gt;<span class="string">&quot; &amp;&amp; yarn deploy&quot;</span></span><br></pre></td></tr></table></figure>

<p>使用 Windows <code>powershell</code>的命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmd /C &#x27;set &quot;GIT_USER=&lt;GITHUB_USERNAME&gt;&quot; &amp;&amp; yarn deploy&#x27;</span><br></pre></td></tr></table></figure>

<p>至此，我们就已完成了部署网站的全部过程！在浏览器中输入你的网址，你应该就能看见你的网站了。</p>
<p><img src="/2024/04/08/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E6%96%87%E6%A1%A3%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA/picture.png" alt="Tinker_Docs"></p>
<h3 id="使用-Github-Actions-自动化部署"><a href="#使用-Github-Actions-自动化部署" class="headerlink" title="使用 Github Actions 自动化部署"></a>使用 Github Actions 自动化部署</h3><p>如果每一次要更新网站，我们都得在本地用命令行进行部署，这显然有些过于繁琐了，且不利于多人协作。有没有办法可以让我们实现一旦网站仓库有更新，就能立刻把新的网站发布出来呢？<a target="_blank" rel="noopener" href="https://docs.github.com/zh/actions">GitHub Actions</a> 就是一个很好的选择。</p>
<blockquote>
<p>GitHub Actions 是一种持续集成和持续交付 (CI&#x2F;CD) 平台，可用于自动执行生成、测试和部署管道。 您可以创建工作流程来构建和测试存储库的每个拉取请求，或将合并的拉取请求部署到生产环境。</p>
</blockquote>
<p>要使用 Github Actions ，我们需要撰写相应的工作流文件（<code>.yaml</code>或<code>.yml</code>格式），来让 Github Actions 为项目提供相应的工作流程。幸运的是，Docusaurus 已经为我们写好了相应的文件：</p>
<p><code>.github/workflows/deploy.yml</code></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">to</span> <span class="string">GitHub</span> <span class="string">Pages</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line">    <span class="comment"># Review gh actions docs if you want to further define triggers, paths, etc</span></span><br><span class="line">    <span class="comment"># https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#on</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">Build</span> <span class="string">Docusaurus</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">fetch-depth:</span> <span class="number">0</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@v4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="number">18</span></span><br><span class="line">          <span class="attr">cache:</span> <span class="string">yarn</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">yarn</span> <span class="string">install</span> <span class="string">--frozen-lockfile</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">website</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">yarn</span> <span class="string">build</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Upload</span> <span class="string">Build</span> <span class="string">Artifact</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/upload-pages-artifact@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">build</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">deploy:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">to</span> <span class="string">GitHub</span> <span class="string">Pages</span></span><br><span class="line">    <span class="attr">needs:</span> <span class="string">build</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Grant GITHUB_TOKEN the permissions required to make a Pages deployment</span></span><br><span class="line">    <span class="attr">permissions:</span></span><br><span class="line">      <span class="attr">pages:</span> <span class="string">write</span> <span class="comment"># to deploy to Pages</span></span><br><span class="line">      <span class="attr">id-token:</span> <span class="string">write</span> <span class="comment"># to verify the deployment originates from an appropriate source</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Deploy to the github-pages environment</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">github-pages</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">$&#123;&#123;</span> <span class="string">steps.deployment.outputs.page_url</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">to</span> <span class="string">GitHub</span> <span class="string">Pages</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">deployment</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/deploy-pages@v4</span></span><br></pre></td></tr></table></figure>

<hr>
<p><code>.github/workflows/test-deploy.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Test</span> <span class="string">deployment</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line">    <span class="comment"># Review gh actions docs if you want to further define triggers, paths, etc</span></span><br><span class="line">    <span class="comment"># https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#on</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">test-deploy:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">Test</span> <span class="string">deployment</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">fetch-depth:</span> <span class="number">0</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@v4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="number">18</span></span><br><span class="line">          <span class="attr">cache:</span> <span class="string">yarn</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">yarn</span> <span class="string">install</span> <span class="string">--frozen-lockfile</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Test</span> <span class="string">build</span> <span class="string">website</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">yarn</span> <span class="string">build</span></span><br></pre></td></tr></table></figure>

<p>这两个工作流文件可实现以下功能：</p>
<ol>
<li>当向 <code>main</code> 发出新的<code>pull request</code>时，有一个 Action 会检测网站是否能够成功构建，而不会真正进行部署。这一工作流被称为 <code>test-deploy</code> 。</li>
<li>当<code>pull request</code>被合并到 <code>main</code> 分支或有人直接<code>push</code>到 <code>main</code> 分支时，网站将被构建并部署到 GitHub Pages。该作业将被称为 <code>deploy</code> 。</li>
</ol>
<p>通过将这两个文件放入项目中的<code>.github/workflows/</code>文件夹并上传至 Github 仓库中，我们即可实现基于 Github Actions 的网站自动化部署。</p>
<hr>
<p>限于篇幅原因，本文对于 Docusaurus 和 Github Pages 的介绍并未深入展开，感兴趣的同学可阅读官方文档（<a target="_blank" rel="noopener" href="https://docusaurus.io/">Docusaurus</a> 和 <a target="_blank" rel="noopener" href="https://pages.github.com/">Github Pages</a>）进一步学习。</p>
<p>Tinker Docs 在搭建过程中较多地参考了 <a target="_blank" rel="noopener" href="https://docs.eesast.com/">EESAST Docs | 清华大学电子工程系学生科协</a> ，在此向 EESAST 各位开发人员表达诚挚谢意。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://grange007.github.io/2024/03/04/OverviewOfLidar/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Grange">
      <meta itemprop="description" content="CAUTION WET FLOOR">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Grange's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/03/04/OverviewOfLidar/" class="post-title-link" itemprop="url">LiDAR 初探</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-03-04 23:41:40" itemprop="dateCreated datePublished" datetime="2024-03-04T23:41:40+08:00">2024-03-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-04-13 14:30:26" itemprop="dateModified" datetime="2024-04-13T14:30:26+08:00">2024-04-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>LiDAR: Light Detection and Ranging</p>
<p>Radar: Radio Detection and Ranging</p>
<h3 id="Lidar工作原理"><a href="#Lidar工作原理" class="headerlink" title="Lidar工作原理"></a>Lidar工作原理</h3><p><img src="https://blog.generationrobots.com/wp-content/uploads/2019/08/what-is-a-lidar-part-1-9.jpg" alt="LiDAR physics principles"></p>
<p>两组关键量：</p>
<ol>
<li>激光的方向</li>
<li>测得的距离</li>
</ol>
<p>测量与计算方式</p>
<ol>
<li><p>飞行时间法(TOF, Pulsed Time of Flight)</p>
<ul>
<li>单个光脉冲</li>
</ul>
<p><img src="https://miro.medium.com/v2/resize:fit:1050/0*7uXUGt0K3jLuJAKc" alt="img"></p>
</li>
<li><p>调幅连续波(AMCW, amplitude modulated continuous waveform laser )</p>
<ul>
<li><p>连续光波，检测相位差</p>
</li>
<li><p>可认为属于TOF</p>
</li>
</ul>
<p><img src="https://miro.medium.com/v2/resize:fit:1050/0*bkhv-UIWz-bEccVU" alt="img"></p>
</li>
<li><p>调频连续波(FMCW, frequency modulated continuous wave)</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1050/0*-Lpl5PSxKyZGPPcw" alt="img"></p>
</li>
</ol>
<ul>
<li>发射一束连续的光束，频率随时间稳定地发生变化。由于源光束的频率在不断变化，光束传输距离的差异会导致频率的差异，将回波信号与本振信号混频并经低通滤波后，得到的差频信号是光束往返时间的函数。</li>
<li>通过频率差值算出与物体的距离</li>
<li>通过多普勒效应算出物体的速度</li>
<li>毫米波雷达的主要原理</li>
</ul>
<h3 id="Lidar功能特点"><a href="#Lidar功能特点" class="headerlink" title="Lidar功能特点"></a>Lidar功能特点</h3><h4 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h4><ol>
<li>数据采集速度快且准确度高</li>
<li>得益于主动照明传感器，LiDAR 技术可以在白天或黑暗中使用</li>
<li>可用于收集有关无法到达的地方的数据</li>
<li>便于收集大片地形数据（机载雷达）</li>
</ol>
<h4 id="劣势"><a href="#劣势" class="headerlink" title="劣势"></a>劣势</h4><ol>
<li>如果环境有雾或烟雾或透明障碍物，如大雨、低空云层，可能会干扰雷达的使用</li>
<li>分析收集的大量数据可能会消耗时间和资源</li>
<li>某些激光雷达使用的强大激光束可能会损害人眼</li>
<li>难以穿透高密度物质</li>
</ol>
<h3 id="Lidar类别"><a href="#Lidar类别" class="headerlink" title="Lidar类别"></a>Lidar类别</h3><h4 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h4><h5 id="机械式"><a href="#机械式" class="headerlink" title="机械式"></a>机械式</h5><p><img src="https://spectrum.ieee.org/media-library/image.jpg?id=25582093" alt="Velodyne Says It&#39;s Got a &quot;Breakthrough&quot; in Solid State Lidar Design - IEEE  Spectrum"></p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=bUVtT7Gp2Z4">机械式Lidar</a></p>
<h5 id="混合固态式（较主流）"><a href="#混合固态式（较主流）" class="headerlink" title="混合固态式（较主流）"></a>混合固态式（较主流）</h5><ol>
<li>MEMS(Microelectromechanical Systems，微机电系统)</li>
</ol>
<p><img src="https://file.vogel.com.cn/125/upload/resources/image/366896.gif?x-oss-process=image/resize,w_700,h_700" alt="img"></p>
<ol start="2">
<li><p>二维转镜</p>
<ol>
<li>二维扫描</li>
</ol>
</li>
</ol>
<p><img src="https://file.vogel.com.cn/125/upload/resources/image/366897.gif?x-oss-process=image/resize,w_700,h_700" alt="img"></p>
<ol start="2">
<li>一维扫描</li>
</ol>
<p><img src="https://file.vogel.com.cn/125/upload/resources/image/366898.gif?x-oss-process=image/resize,w_700,h_700" alt="img"></p>
<h5 id="固态式（未来发展）"><a href="#固态式（未来发展）" class="headerlink" title="固态式（未来发展）"></a>固态式（未来发展）</h5><ol>
<li><p>相控阵(OPA)</p>
<p>在相控阵中，来自发射器的功率通过称为移相器的设备馈送到辐射元件，该设备由计算机系统控制，可以电子方式改变相位或信号延迟，从而将无线电波束转向不同的方向。</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4a/Phased_array_animation_with_arrow_10frames_371x400px_100ms.gif/330px-Phased_array_animation_with_arrow_10frames_371x400px_100ms.gif" alt="img"></p>
<p>一束光经过光分束器分为多路光信号。在各路光信号附加相位差之后(以各路光信号赋予均匀的相位差为例，第二个波导与第一个波导的相位差为ΔϕB，第三个波导与第一个波导的相位差为2ΔϕB，以此类推)，此时的等相位面不再垂直于波导方向，而是有了一定的偏转，满足等相位关系的波束会相干相长，不满足等相位条件的光束就会相互抵消，故光束的指向总是垂直于等相位面。</p>
</li>
</ol>
<p><img src="https://pic3.zhimg.com/80/v2-a5c2156041b0791363ab787ee6d03162_720w.webp" alt="img"></p>
<ol start="2">
<li><p>泛光面阵(FLASH)</p>
<p>Flash 激光雷达在短时间直接发射出一大片覆盖探测区域的激光，再以高度灵敏的接收器，来完成对环境周围图像的绘制。</p>
</li>
</ol>
<p><img src="https://www.researchgate.net/profile/Suddhasheel-Ghosh/publication/261333968/figure/fig3/AS:667860351328267@1536241724587/LiDAR-vs-Flash-LiDAR-technologies-Courtesy-wwwfosternavnet.jpg" alt="img"></p>
<h4 id="维度"><a href="#维度" class="headerlink" title="维度"></a>维度</h4><ul>
<li>1D</li>
</ul>
<img src="https://www.generationrobots.com/blog/wp-content/uploads/2019/08/what-is-a-lidar-part-1-7.jpg" alt="img" style="zoom:80%;" />

<ul>
<li><p>2D</p>
<p>一道旋转激光</p>
</li>
</ul>
<img src="https://www.generationrobots.com/blog/wp-content/uploads/2019/08/what-is-a-lidar-part-1-8.jpg" alt="img" style="zoom:80%;" />

<ul>
<li><p>3D</p>
<p>多道旋转激光</p>
</li>
</ul>
<img src="https://www.generationrobots.com/blog/wp-content/uploads/2019/08/what-is-a-lidar-part-1-6.jpg" alt="img" style="zoom:80%;" />



<h4 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h4><ul>
<li>室内</li>
<li>室外<ul>
<li>阳光产生的干扰</li>
<li>雨雪对透光度的影响</li>
<li>室外温度影响</li>
</ul>
</li>
</ul>
<h3 id="Lidar参数"><a href="#Lidar参数" class="headerlink" title="Lidar参数"></a>Lidar参数</h3><h4 id="波长"><a href="#波长" class="headerlink" title="波长"></a>波长</h4><p>常见车载雷达使用波长：</p>
<ul>
<li><p>905nm </p>
<ul>
<li>器件相对成熟，成本较低</li>
<li>考虑到人眼安全要求，激光功率受到明显限制</li>
<li>太阳光中存在较多近红外背景光，传感器信噪比物理上受限，最大探测距离限制在150米左右</li>
<li>穿透力更强，能够应对复杂环境情况</li>
</ul>
</li>
<li><p>1550nm</p>
<ul>
<li>同等功率的1550 nm激光人眼安全性提高40倍</li>
<li>背景光干扰问题相对较小，可以实现远距离探测</li>
<li>探测器只对自身发射的激光回波响应，信噪比远高于905nm-ToF激光雷达，最大探测距离可以达到1000米以上</li>
<li>1550 nm配合调频连续波(FMCW)的技术，不仅可以检测距离，同时可以利用多普勒频移来测量物体的速度</li>
</ul>
<p><img src="https://velodynelidar.com/wp-content/uploads/2021/03/Lidar-Wavelengths-Comparison-905-nm-vs-1550-nm-Velodyne-Lidar-01-1536x808.jpg" alt="img"></p>
</li>
</ul>
<h4 id="测距能力"><a href="#测距能力" class="headerlink" title="测距能力"></a>测距能力</h4><p>在车载lidar的表征上经常会通过10%反射率板标注最远测距距离，表达形式如XXm@10% reflectivity的测距能力。测距距离越长表明在系统中接触到物体的时间越早，留给系统判断和决策的时间越长</p>
<blockquote>
<p>反射率（reflectivity），是材料表面反射辐射能的有效性。它是在边界处反射电磁功率与入射电磁功率的比值。</p>
</blockquote>
<blockquote>
<p>勒克斯（Lux，通常简写为<strong>lx</strong>）是一个标识照度的国际单位制单位，1流明每平方米面积，就是1勒克斯。</p>
</blockquote>
<h4 id="测距精度"><a href="#测距精度" class="headerlink" title="测距精度"></a>测距精度</h4><p>测距精度主要表征lidar测量物体时数据的一致性。精度越高表示误差越小，每一次获取到的数值更为一致。</p>
<p>例如：＜2cm （1σ@20m）即表示在20m测量位置，在1σ（标准差）的概率下，每次测量的误差值小于2cm。</p>
<h4 id="视场角-FOV-Field-of-View"><a href="#视场角-FOV-Field-of-View" class="headerlink" title="视场角(FOV, Field of View)"></a>视场角(FOV, Field of View)</h4><p>分为水平视场角，垂直视场角。表示lidar前方能扫描到的区域。视场角越大则扫描范围越大。</p>
<h4 id="角分辨率"><a href="#角分辨率" class="headerlink" title="角分辨率"></a>角分辨率</h4><p>两点之间的角度间隔（水平与竖直）。间隔越小对物体细节表现越细致。若有开发ROI功能，角分辨率会更小。</p>
<h4 id="帧率"><a href="#帧率" class="headerlink" title="帧率"></a>帧率</h4><p>lidar每秒传递的帧数，每一帧都是完整的一轮扫描结果，以Hz为单位，通常为5、10、20Hz </p>
<h4 id="点频"><a href="#点频" class="headerlink" title="点频"></a>点频</h4><p>lidar扫描1s的总探测点数（点&#x2F;秒）</p>
<p>$单帧点数 * 帧率数值 &#x3D; 点频$</p>
<h4 id="盲区"><a href="#盲区" class="headerlink" title="盲区"></a>盲区</h4><p>考虑雷达盒体内的光束探测反馈（玻璃片前导信号及其他反馈信号）可能会使得近距离的探测精度大幅度下降使得数据没有意义，所以会存在直接舍去近距离点云的部分数据，这部分会被划定为盲区。</p>
<ul>
<li>补盲雷达：专门负责检测近处物体</li>
</ul>
<blockquote>
<p>[2] 若目标物体距离 0.1 m 至 0.2 m，激光探测测距仪可探测并输出点云数据，但由于无法保证探测精度，此数据仅供参考。</p>
</blockquote>
<h4 id="人眼安全级别-Laser-class"><a href="#人眼安全级别-Laser-class" class="headerlink" title="人眼安全级别(Laser class)"></a>人眼安全级别(Laser class)</h4><p>几乎所有激光雷达扫描仪都属于激光等级1，这是最安全的级别。它表示扫描仪是完全无害的，你可以在眼睛没有任何保护措施的情况下直视它，而不会受到任何负面影响。</p>
<h4 id="防护等级"><a href="#防护等级" class="headerlink" title="防护等级"></a>防护等级</h4><p>IP等级的第一位数字代表其抗尘性，第二个数字是其抗液性 (IP67)</p>
<h4 id="功率"><a href="#功率" class="headerlink" title="功率"></a>功率</h4><p>雷达发热情况</p>
<h4 id="IMU"><a href="#IMU" class="headerlink" title="IMU"></a>IMU</h4><p>使用IMU更新Lidar的朝向</p>
<h3 id="Tinker使用的Lidar——Livox-Mid-360"><a href="#Tinker使用的Lidar——Livox-Mid-360" class="headerlink" title="Tinker使用的Lidar——Livox Mid 360"></a>Tinker使用的Lidar——Livox Mid 360</h3><p>业界首款 360° 混合固态激光雷达</p>
<p>￥3999</p>
<p><img src="https://www.livoxtech.com/dps/ba737ccbcf6b6b1a731df04fdb24783f.png" alt="觅道  Mid-360"></p>
<p><img src="C:\Users\86138\AppData\Roaming\Typora\typora-user-images\image-20230924124405603.png" alt="image-20230924124405603"></p>
<p><img src="C:\Users\86138\AppData\Roaming\Typora\typora-user-images\image-20230921181441600.png" alt="image-20230921181441600"></p>
<h3 id="LiDAR数据处理"><a href="#LiDAR数据处理" class="headerlink" title="LiDAR数据处理"></a>LiDAR数据处理</h3><h4 id="PointCloud"><a href="#PointCloud" class="headerlink" title="PointCloud"></a>PointCloud</h4><p>sensor_msgs&#x2F;PointCloud</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># This message holds a collection of <span class="number">3</span>d points, plus optional additional</span><br><span class="line"><span class="meta"># information about each point.</span></span><br><span class="line"></span><br><span class="line"># Time of sensor data acquisition, coordinate frame ID.</span><br><span class="line">Header header</span><br><span class="line"></span><br><span class="line"># Array of <span class="number">3</span>d points. Each Point32 should be interpreted as a <span class="number">3</span>d point</span><br><span class="line"><span class="meta"># in the frame given in the header.</span></span><br><span class="line">geometry_msgs/Point32[] points</span><br><span class="line"></span><br><span class="line"># Each channel should have the same number of elements as points array,</span><br><span class="line"><span class="meta"># and the data in each channel should correspond 1:1 with each point.</span></span><br><span class="line"># Channel names in common practice are listed in ChannelFloat32.msg.</span><br><span class="line">ChannelFloat32[] channels</span><br></pre></td></tr></table></figure>



<p>sensor_msgs&#x2F;ChannelFloat32</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># This message is used by the PointCloud message to hold optional data</span><br><span class="line"><span class="meta"># associated with each point in the cloud. The length of the values</span></span><br><span class="line"><span class="meta"># array should be the same as the length of the points array in the</span></span><br><span class="line"># PointCloud, <span class="keyword">and</span> each value should be associated with the corresponding</span><br><span class="line"><span class="meta"># point.</span></span><br><span class="line"></span><br><span class="line"># Channel names in existing practice include:</span><br><span class="line">#   <span class="string">&quot;u&quot;</span>, <span class="string">&quot;v&quot;</span> - <span class="function">row <span class="keyword">and</span> <span class="title">column</span> <span class="params">(respectively)</span> in the left stereo image.</span></span><br><span class="line"><span class="function">#              This is opposite to usual conventions but remains <span class="keyword">for</span></span></span><br><span class="line"><span class="function"><span class="meta">#              historical reasons. The newer PointCloud2 message has no</span></span></span><br><span class="line"><span class="function"><span class="meta">#              such problem.</span></span></span><br><span class="line"><span class="function">#   &quot;rgb&quot; - For point clouds produced by color stereo cameras. uint8</span></span><br><span class="line"><span class="function">#           <span class="params">(R,G,B)</span> values packed into the least significant 24 bits,</span></span><br><span class="line"><span class="function"><span class="meta">#           in order.</span></span></span><br><span class="line"><span class="function">#   &quot;intensity&quot; - laser <span class="keyword">or</span> pixel intensity.</span></span><br><span class="line"><span class="function">#   &quot;distance&quot;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"># The channel name should give semantics of the <span class="title">channel</span> <span class="params">(e.g.</span></span></span><br><span class="line"><span class="params"><span class="function"># <span class="string">&quot;intensity&quot;</span> instead of <span class="string">&quot;value&quot;</span>)</span>.</span></span><br><span class="line"><span class="function">string name</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"># The values array should be 1-1 with the elements of the associated</span></span><br><span class="line"><span class="function"># PointCloud.</span></span><br><span class="line"><span class="function">float32[] values</span></span><br></pre></td></tr></table></figure>



<p>典型应用</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将数据通过消息发送出去</span></span><br><span class="line">sensor_msgs::PointCloud cloud;</span><br><span class="line">cloud.header.stamp = ros::Time::<span class="built_in">now</span>();</span><br><span class="line">cloud.header.frame_id = <span class="string">&quot;sensor_frame&quot;</span>;<span class="comment">//帧id</span></span><br><span class="line">cloud.points.<span class="built_in">resize</span>(LINE*CIRCLEPT);</span><br><span class="line">cloud.channels.<span class="built_in">resize</span>(<span class="number">2</span>);<span class="comment">//设置增加通道数</span></span><br><span class="line">cloud.channels[<span class="number">0</span>].name = <span class="string">&quot;intensity&quot;</span>;<span class="comment">//增加反射强度信道，并设置其大小，使与点云数量相匹配</span></span><br><span class="line">cloud.channels[<span class="number">0</span>].values.<span class="built_in">resize</span>(LINE*CIRCLEPT);</span><br><span class="line">cloud.channels[<span class="number">1</span>].name = <span class="string">&quot;distance&quot;</span>;<span class="comment">//增加距离信道，并设置其大小，使与点云数量相匹配</span></span><br><span class="line">cloud.channels[<span class="number">1</span>].values.<span class="built_in">resize</span>(LINE*CIRCLEPT);</span><br><span class="line"><span class="type">int</span> i=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> l = <span class="number">0</span>; l &lt; LINE; l++)</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> c = <span class="number">0</span>; c &lt; CIRCLEPT; c++)</span><br><span class="line">	&#123;</span><br><span class="line">		cloud.points[i].x = mdecoder.mpointcloud[l][c].x;</span><br><span class="line">		cloud.points[i].y = mdecoder.mpointcloud[l][c].y;</span><br><span class="line">		cloud.points[i].z = mdecoder.mpointcloud[l][c].z;</span><br><span class="line">		cloud.channels[<span class="number">0</span>].values[i] = mdecoder.mpointcloud[l][c].r;<span class="comment">//设置反射强度</span></span><br><span class="line">		cloud.channels[<span class="number">1</span>].values[i] = mdecoder.mpointcloud[l][c].d;</span><br><span class="line">		i++;</span><br><span class="line">	&#125;</span><br><span class="line">cloud_pub.<span class="built_in">publish</span>(cloud);</span><br></pre></td></tr></table></figure>



<h4 id="PointCloud2"><a href="#PointCloud2" class="headerlink" title="PointCloud2"></a>PointCloud2</h4><p>sensor_msgs&#x2F;PointCloud2</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This message holds a collection of N-dimensional points, which may</span></span><br><span class="line"><span class="comment"># contain additional information such as normals, intensity, etc. The</span></span><br><span class="line"><span class="comment"># point data is stored as a binary blob, its layout described by the</span></span><br><span class="line"><span class="comment"># contents of the &quot;fields&quot; array.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The point cloud data may be organized 2d (image-like) or 1d</span></span><br><span class="line"><span class="comment"># (unordered). Point clouds organized as 2d images may be produced by</span></span><br><span class="line"><span class="comment"># camera depth sensors such as stereo or time-of-flight.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Time of sensor data acquisition, and the coordinate frame ID (for 3d</span></span><br><span class="line"><span class="comment"># points).</span></span><br><span class="line">Header header</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2D structure of the point cloud. If the cloud is unordered, height is</span></span><br><span class="line"><span class="comment"># 1 and width is the length of the point cloud.</span></span><br><span class="line">uint32 height 	<span class="comment"># height != 1: 有组织的二维点云，通过了解相邻点（例如像素）之间的关系，最近邻操作更加高效</span></span><br><span class="line">uint32 width  	<span class="comment"># point的行数，若height = 1则width为所有点的数量</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Describes the channels and their layout in the binary data blob.</span></span><br><span class="line">PointField[] fields</span><br><span class="line"></span><br><span class="line"><span class="built_in">bool</span>    is_bigendian <span class="comment"># Is this data bigendian?</span></span><br><span class="line">uint32  point_step   <span class="comment"># Length of a point in bytes</span></span><br><span class="line">uint32  row_step     <span class="comment"># Length of a row in bytes</span></span><br><span class="line"><span class="comment"># row_step = width * point_step 存所有数据（一个数组）的字节</span></span><br><span class="line">uint8[] data         <span class="comment"># Actual point data, size is (row_step*height)</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">bool</span> is_dense        <span class="comment"># True if there are no invalid points</span></span><br></pre></td></tr></table></figure>

<p>big endian &amp; small endian</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5d/32bit-Endianess.svg/600px-32bit-Endianess.svg.png" alt="img"></p>
<p>sensor_msgs&#x2F;PointField</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This message holds the description of one point entry in the</span></span><br><span class="line"><span class="comment"># PointCloud2 message format.</span></span><br><span class="line">uint8 INT8    = <span class="number">1</span> </span><br><span class="line">uint8 UINT8   = <span class="number">2</span> </span><br><span class="line">uint8 INT16   = <span class="number">3</span> </span><br><span class="line">uint8 UINT16  = <span class="number">4</span> </span><br><span class="line">uint8 INT32   = <span class="number">5</span> </span><br><span class="line">uint8 UINT32  = <span class="number">6</span> </span><br><span class="line">uint8 FLOAT32 = <span class="number">7</span> </span><br><span class="line">uint8 FLOAT64 = <span class="number">8</span> </span><br><span class="line"></span><br><span class="line">string name      <span class="comment"># Name of field </span></span><br><span class="line">uint32 offset    <span class="comment"># Offset from start of point struct </span></span><br><span class="line">uint8  datatype  <span class="comment"># Datatype enumeration, see above </span></span><br><span class="line">uint32 count     <span class="comment"># How many elements in the field</span></span><br></pre></td></tr></table></figure>



<p>典型应用</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">header:</span> </span><br><span class="line">  <span class="attr">seq:</span> <span class="number">1071</span></span><br><span class="line">  <span class="attr">stamp:</span> </span><br><span class="line">    <span class="attr">secs:</span> <span class="number">1521699326</span></span><br><span class="line">    <span class="attr">nsecs:</span> <span class="number">676390000</span></span><br><span class="line">  <span class="attr">frame_id:</span> <span class="string">&quot;velodyne&quot;</span></span><br><span class="line"><span class="attr">height:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">width:</span> <span class="number">66811</span></span><br><span class="line"><span class="attr">fields:</span> </span><br><span class="line">  <span class="bullet">-</span> </span><br><span class="line">    <span class="attr">name:</span> <span class="string">&quot;x&quot;</span></span><br><span class="line">    <span class="attr">offset:</span> <span class="number">0</span></span><br><span class="line">    <span class="attr">datatype:</span> <span class="number">7</span></span><br><span class="line">    <span class="attr">count:</span> <span class="number">1</span></span><br><span class="line">  <span class="bullet">-</span> </span><br><span class="line">    <span class="attr">name:</span> <span class="string">&quot;y&quot;</span></span><br><span class="line">    <span class="attr">offset:</span> <span class="number">4</span></span><br><span class="line">    <span class="attr">datatype:</span> <span class="number">7</span></span><br><span class="line">    <span class="attr">count:</span> <span class="number">1</span></span><br><span class="line">  <span class="bullet">-</span> </span><br><span class="line">    <span class="attr">name:</span> <span class="string">&quot;z&quot;</span></span><br><span class="line">    <span class="attr">offset:</span> <span class="number">8</span></span><br><span class="line">    <span class="attr">datatype:</span> <span class="number">7</span></span><br><span class="line">    <span class="attr">count:</span> <span class="number">1</span></span><br><span class="line">  <span class="bullet">-</span> </span><br><span class="line">    <span class="attr">name:</span> <span class="string">&quot;intensity&quot;</span></span><br><span class="line">    <span class="attr">offset:</span> <span class="number">16</span></span><br><span class="line">    <span class="attr">datatype:</span> <span class="number">7</span></span><br><span class="line">    <span class="attr">count:</span> <span class="number">1</span></span><br><span class="line">  <span class="bullet">-</span> </span><br><span class="line">    <span class="attr">name:</span> <span class="string">&quot;ring&quot;</span></span><br><span class="line">    <span class="attr">offset:</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">datatype:</span> <span class="number">4</span></span><br><span class="line">    <span class="attr">count:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">is_bigendian:</span> <span class="literal">False</span></span><br><span class="line"><span class="attr">point_step:</span> <span class="number">32</span></span><br><span class="line"><span class="string">//</span> <span class="string">FLOAT32(4)</span> <span class="string">+</span> <span class="string">FLOAT32(4)</span> <span class="string">+</span> <span class="string">FLOAT32(4)</span> <span class="string">+</span> <span class="string">FLOAT32(4)</span> <span class="string">+</span> <span class="string">UINT16(2)</span> <span class="string">+</span> <span class="string">EMPTY(10)</span> <span class="string">=</span> <span class="number">20</span></span><br><span class="line"><span class="attr">row_step:</span> <span class="number">2137952</span> <span class="string">//</span> <span class="string">=</span> <span class="number">66811</span> <span class="string">*</span> <span class="number">32</span></span><br><span class="line"><span class="attr">data:</span> [<span class="number">235</span>, <span class="number">171</span>, <span class="number">54</span>, <span class="number">190</span>, <span class="number">53</span>, <span class="number">107</span>, <span class="number">250</span>, <span class="string">...</span></span><br></pre></td></tr></table></figure>

<p>offset:</p>
<table>
<thead>
<tr>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
<th>10</th>
<th>11</th>
<th>12</th>
<th>13</th>
<th>14</th>
<th>15</th>
<th>16</th>
<th>17</th>
<th>18</th>
<th>19</th>
<th>20</th>
<th>21</th>
<th>22</th>
<th>23</th>
<th>24 ~31</th>
</tr>
</thead>
<tbody><tr>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>y</td>
<td>y</td>
<td>y</td>
<td>y</td>
<td>z</td>
<td>z</td>
<td>z</td>
<td>z</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>i</td>
<td>i</td>
<td>i</td>
<td>i</td>
<td>r</td>
<td>r</td>
<td>r</td>
<td>r</td>
<td>-</td>
</tr>
</tbody></table>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sensor_msgs/PointCloud2.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sensor_msgs/PointField.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sensor_msgs/point_cloud2_iterator.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">sensor_msgs::PointCloud2 pcl_msg;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//Modifier to describe what the fields are.</span></span><br><span class="line"><span class="function">sensor_msgs::PointCloud2Modifier <span class="title">modifier</span><span class="params">(pcl_msg)</span></span>;</span><br><span class="line"></span><br><span class="line">modifier.<span class="built_in">setPointCloud2Fields</span>(<span class="number">4</span>,</span><br><span class="line">    <span class="string">&quot;x&quot;</span>, <span class="number">1</span>, sensor_msgs::PointField::FLOAT32,</span><br><span class="line">    <span class="string">&quot;y&quot;</span>, <span class="number">1</span>, sensor_msgs::PointField::FLOAT32,</span><br><span class="line">    <span class="string">&quot;z&quot;</span>, <span class="number">1</span>, sensor_msgs::PointField::FLOAT32,</span><br><span class="line">    <span class="string">&quot;intensity&quot;</span>, <span class="number">1</span>, sensor_msgs::PointField::FLOAT32);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Msg header</span></span><br><span class="line">pcl_msg.header = std_msgs::<span class="built_in">Header</span>();</span><br><span class="line">pcl_msg.header.stamp = ros::Time::<span class="built_in">now</span>();</span><br><span class="line">pcl_msg.header.frame_id = <span class="string">&quot;frame&quot;</span>;</span><br><span class="line"></span><br><span class="line">pcl_msg.height = height;</span><br><span class="line">pcl_msg.width = width;</span><br><span class="line">pcl_msg.is_dense = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Total number of bytes per point</span></span><br><span class="line">pcl_msg.point_step = <span class="number">16</span>;</span><br><span class="line">pcl_msg.row_step = pcl_msg.point_step * pcl_msg.width;</span><br><span class="line">pcl_msg.data.<span class="built_in">resize</span>(pcl_msg.row_step);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Iterators for PointCloud msg</span></span><br><span class="line"><span class="function">sensor_msgs::PointCloud2Iterator&lt;<span class="type">float</span>&gt; <span class="title">iterX</span><span class="params">(pcl_msg, <span class="string">&quot;x&quot;</span>)</span></span>;</span><br><span class="line"><span class="function">sensor_msgs::PointCloud2Iterator&lt;<span class="type">float</span>&gt; <span class="title">iterY</span><span class="params">(pcl_msg, <span class="string">&quot;y&quot;</span>)</span></span>;</span><br><span class="line"><span class="function">sensor_msgs::PointCloud2Iterator&lt;<span class="type">float</span>&gt; <span class="title">iterZ</span><span class="params">(pcl_msg, <span class="string">&quot;z&quot;</span>)</span></span>;</span><br><span class="line"><span class="function">sensor_msgs::PointCloud2Iterator&lt;<span class="type">float</span>&gt; <span class="title">iterIntensity</span><span class="params">(pcl_msg, <span class="string">&quot;intensity&quot;</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//iterate over the message and populate the fields.      </span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; width; i++)</span><br><span class="line">&#123;</span><br><span class="line">  *iterX = <span class="comment">//Your x data</span></span><br><span class="line">  *iterY = <span class="comment">//Your y data</span></span><br><span class="line">  *iterZ = <span class="comment">//Your z data</span></span><br><span class="line">  *iterIntensity = <span class="comment">//Your intensity data</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Increment the iterators</span></span><br><span class="line">  ++iterX;</span><br><span class="line">  ++iterY;</span><br><span class="line">  ++iterZ;</span><br><span class="line">  ++iterIntensity;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://grange007.github.io/2024/03/04/MauiTutorial/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Grange">
      <meta itemprop="description" content="CAUTION WET FLOOR">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Grange's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/03/04/MauiTutorial/" class="post-title-link" itemprop="url">Maui Winter Tutorial</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-03-04 23:07:17 / 修改时间：23:44:50" itemprop="dateCreated datePublished" datetime="2024-03-04T23:07:17+08:00">2024-03-04</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h2><p>感兴趣的同学可在课前按照这一教程 <a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/training/modules/build-mobile-and-desktop-apps/4-exercise-create-your-first-maui-app">练习：创建第一个 .NET MAUI 应用 - Training | Microsoft Learn</a> 配置环境，以跑出如下的Hello World界面为成功。</p>
<p>本节课内容将主要针对于Windows平台下的开发，暂时无需配置其他平台的环境。</p>
<p><img src="/2024/03/04/MauiTutorial/image-20240128221948128.png" alt="image-20240128221948128"></p>
<h2 id="MAUI简介"><a href="#MAUI简介" class="headerlink" title="MAUI简介"></a>MAUI简介</h2><h3 id="什么是MAUI"><a href="#什么是MAUI" class="headerlink" title="什么是MAUI"></a>什么是MAUI</h3><p>MAUI，全名Multi-platform Application User Interface，是微软提出的一个跨平台框架，用于使用 C# 和 XAML 创建本机移动和桌面应用。</p>
<p>使用 .NET MAUI，可从单个共享代码库开发可在 Android、iOS、macOS 和 Windows 上运行的应用。</p>
<p>可以针对以下平台编写 .NET Multi-platform App UI (.NET MAUI) 应用：</p>
<ul>
<li>Android 5.0 (API 21) 或更高版本。</li>
<li>iOS 11 或更高版本，使用最新版本的 Xcode。</li>
<li>macOS 10.15 或更高版本，使用 Mac Catalyst。</li>
<li>Windows 11 和 Windows 10 版本 1809 或更高版本，使用 Windows UI 库 (WinUI) 3。</li>
</ul>
<h3 id="MAUI开发平台"><a href="#MAUI开发平台" class="headerlink" title="MAUI开发平台"></a>MAUI开发平台</h3><ul>
<li><p><strong>Windows + Visual Studio，强烈推荐</strong></p>
</li>
<li><p>macOS + Visual Studio for Mac（Visual Studio for Mac 计划于 2024 年 8 月 31 日停用）</p>
</li>
<li><p>Windows&#x2F;macOS&#x2F;Linux + Vscode with .NET MAUI Extension（预览版）</p>
<p>此扩展仍为早期预览版，因此存在许多已知限制：</p>
<ul>
<li>XAML 编辑功能非常轻量 - 你可以获得基本的语法突出显示和自动完成功能。 我们正在探索如何在将来的版本中改进 XAML 体验。</li>
<li>目前，无法切换 IntelliSense 的目标框架（它仅针对 .csproj 文件中列出的第一个目标框架显示语法突出显示）。 此功能正在开发中。</li>
<li>目前不支持 XAML 和 .NET 热重载。</li>
<li>此扩展尚未使用最新的 iOS 和 Xcode beta 版本进行全面测试。</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th align="left">你的操作系统</th>
<th align="left">受支持的目标平台</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Windows</td>
<td align="left">Windows、Android</td>
</tr>
<tr>
<td align="left">macOS</td>
<td align="left">Android、iOS、macOS</td>
</tr>
<tr>
<td align="left">Linux</td>
<td align="left">Android</td>
</tr>
</tbody></table>
<h2 id="MAUI基础教程"><a href="#MAUI基础教程" class="headerlink" title="MAUI基础教程"></a>MAUI基础教程</h2><h3 id="MAUI文件结构"><a href="#MAUI文件结构" class="headerlink" title="MAUI文件结构"></a>MAUI文件结构</h3><p><img src="/2024/03/04/MauiTutorial/image-20240125175530880.png" alt="image-20240125175530880"></p>
<ul>
<li><p>MauiWinterTutorial：<code>csproj</code>文件，用于整个项目的配置</p>
</li>
<li><p>Platforms：针对不同平台所需的文件资源和配置</p>
</li>
<li><p>Resources：图标、图片、字体等项目资源文件</p>
</li>
<li><p>MauiProgram.cs：这是启动应用的代码文件。 此文件中的代码充当应用的跨平台入口点，用于配置和启动应用。 模板启动代码指向由 App.xaml 文件定义的 <code>App</code> 类。</p>
<p>所有 XAML 文件通常都包含两个文件，即 .xaml 文件本身，以及一个相应的代码文件，该文件是“解决方案资源管理器”中的 .xaml 文件的子项。 .xaml 文件包含 XAML 标记，代码文件包含用户创建的用于与 XAML 标记交互的代码。</p>
</li>
<li><p>App.xaml 和 App.xaml.cs：App.xaml 文件包含应用范围的 XAML 资源，例如颜色、样式或模板。 App.xaml.cs 文件通常包含用于实例化 Shell 应用程序的代码。 在此项目中，它指向 <code>AppShell</code> 类。</p>
</li>
<li><p>AppShell.xaml 和 AppShell.xaml.cs：此文件定义 <code>AppShell</code> 类，该类用于定义应用的视觉对象层次结构（页面导航）。</p>
<p><img src="https://learn.microsoft.com/zh-cn/dotnet/maui/fundamentals/shell/media/create/flyout.png?view=net-maui-8.0" alt="Screenshot of a Shell flyout."></p>
</li>
<li><p>MainPage.xaml 和 MainPage.xaml.cs：这是应用显示的启动页。 MainPage.xaml 文件定义页面的 UI（用户界面）。 MainPage.xaml.cs 包含 XAML 的代码隐藏，如按钮单击事件的代码。</p>
</li>
</ul>
<p>项目启动流程：</p>
<p>MauiProgram.cs –&gt; App –&gt; AppShell –&gt; MainPage </p>
<h3 id="XAML概述"><a href="#XAML概述" class="headerlink" title="XAML概述"></a>XAML概述</h3><p>eXtensible Application Markup Language（XAML，可扩展的应用程序标记语言）是基于 XML 的语言，可替代编程代码执行对象的实例化和初始化并按父子层次结构来组织这些对象。</p>
<p>XAML 使开发人员能够使用标记而不是代码定义 .NET Multi-platform App UI (.NET MAUI) 应用中的用户界面。 XAML 在 .NET MAUI 应用中不是必需的（XAML实现的UI设计功能均可通过等效的C#代码实现），但建议使用它来开发 UI，因为它通常更简洁、更直观、更连贯，并且具有工具支持。 XAML 也非常适合与模型-视图-视图模型 (MVVM) 模式一起使用，其中 XAML 定义视图，而视图通过基于 XAML 的数据绑定链接到视图模型代码。</p>
<h4 id="属性设置"><a href="#属性设置" class="headerlink" title="属性设置"></a>属性设置</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Label Text=&quot;Hello, XAML!&quot;</span><br><span class="line">       VerticalOptions=&quot;Center&quot;</span><br><span class="line">       FontAttributes=&quot;Bold&quot;</span><br><span class="line">       FontSize=&quot;18&quot;</span><br><span class="line">       TextColor=&quot;Aqua&quot; /&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;Label Text=&quot;Hello, XAML!&quot;</span><br><span class="line">       VerticalOptions=&quot;Center&quot;</span><br><span class="line">       FontAttributes=&quot;Bold&quot;</span><br><span class="line">       FontSize=&quot;18&quot;&gt;</span><br><span class="line">    &lt;Label.TextColor&gt;</span><br><span class="line">        Aqua</span><br><span class="line">    &lt;/Label.TextColor&gt;</span><br><span class="line">&lt;/Label&gt;</span><br></pre></td></tr></table></figure>

<p>这两个指定 <code>TextColor</code> 属性的示例在功能上是等效的。</p>
<p>在这里，Label是一个对象元素。 它是一个以 XML 元素表示的 .NET MAUI 对象。</p>
<p>可以等效认为一个XAML标签就代表了一个对象（类），对象之间成并列或包含关系，标签内部包含了这个对象的属性及其他信息。</p>
<h4 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h4><p>通常而言，不会通过 XAML 来定义命名空间，而只是在 XAML 中声明来自C#程序或其他程序中的命名空间。</p>
<p>XAML 使用 <code>xmlns</code> XML 特性进行命名空间声明。 XAML 文件的根元素中始终有两个 XAML 命名空间声明。 </p>
<ul>
<li><p>第一个定义默认命名空间：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xmlns=&quot;http://schemas.microsoft.com/dotnet/2021/maui&quot;</span><br></pre></td></tr></table></figure>

<p>默认命名空间指定 XAML 文件中定义的不带前缀的元素引用 .NET Multi-platform App UI (.NET MAUI) 类，例如 ContentPage、Label 和 Button。</p>
</li>
<li><p>第二个命名空间声明使用 <code>x</code> 前缀：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;</span><br></pre></td></tr></table></figure>

<p>XAML 使用前缀声明非默认命名空间，并在引用命名空间中的类型时使用前缀。 <code>x</code> 命名空间声明指定在 XAML 中定义的带有 <code>x</code> 前缀的元素用于 XAML固有的元素和属性。</p>
<p>下表概述了 .NET MAUI 支持的 <code>x</code> 构造：</p>
<table>
<thead>
<tr>
<th align="left">构造</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>x:Arguments</code></td>
<td align="left">指定非默认构造函数或工厂方法对象声明的构造函数参数。</td>
</tr>
<tr>
<td align="left"><code>x:Class</code></td>
<td align="left">指定 XAML 中定义的类的命名空间和类名。 类名必须与代码隐藏文件的类名匹配。 请注意，此构造只能出现在 XAML 文件的根元素中。</td>
</tr>
<tr>
<td align="left"><code>x:ClassModifier</code></td>
<td align="left">指定程序集中生成的类的访问级别。</td>
</tr>
<tr>
<td align="left"><code>x:DataType</code></td>
<td align="left">指定 XAML 元素及其子元素将绑定到的对象的类型。</td>
</tr>
<tr>
<td align="left"><code>x:FactoryMethod</code></td>
<td align="left">指定可用于初始化对象的工厂方法。</td>
</tr>
<tr>
<td align="left"><code>x:FieldModifier</code></td>
<td align="left">指定命名 XAML 元素的生成字段的访问级别。</td>
</tr>
<tr>
<td align="left"><code>x:Key</code></td>
<td align="left">为 ResourceDictionary 中的每个资源指定一个唯一的用户定义密钥。 密钥的值用于检索 XAML 资源，通常用作 <code>StaticResource</code>标记扩展的参数。</td>
</tr>
<tr>
<td align="left"><code>x:Name</code></td>
<td align="left">指定 XAML 元素的运行时对象名称。 设置 <code>x:Name</code> 类似于在代码中声明变量。</td>
</tr>
<tr>
<td align="left"><code>x:TypeArguments</code></td>
<td align="left">指定泛型类型构造函数的泛型类型参数。</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ContentPage xmlns=&quot;http://schemas.microsoft.com/dotnet/2021/maui&quot;</span><br><span class="line">             xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;</span><br><span class="line">             x:Class=&quot;MauiWinterTutorial.MainPage&quot;&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;/ContentPage&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>可以通过使用前缀声明 XAML 命名空间，在 XAML 中引用类型，命名空间声明指定公共语言运行时 (CLR) 命名空间名称以及可选的程序集名称。 这通过在命名空间声明中定义以下关键字的值来实现：</p>
<ul>
<li><code>clr-namespace:</code> 或 <code>using:</code> - 在程序集（<strong>程序集内部</strong>）中声明的 CLR 命名空间，此程序集包含要作为 XAML 元素公开的类型。 此关键字是必需的。</li>
<li><code>assembly=</code> - 包含引用的 CLR 命名空间的程序集（<strong>外部程序集</strong>）。 该值是程序集的名称，不带文件扩展名。 程序集的路径应在包含将引用程序集的 XAML 文件的项目中作为引用建立。 如果 clr-namespace 值与引用类型的应用代码位于同一程序集中，则可以省略此关键字。</li>
</ul>
<p><strong>在程序集中声明命名空间：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;ContentPage ... xmlns:local=&quot;clr-namespace:MyMauiApp&quot;&gt;</span><br><span class="line">  ...</span><br><span class="line">&lt;/ContentPage&gt;</span><br><span class="line">&lt;!-- 等价于 --&gt;</span><br><span class="line">&lt;ContentPage ... xmlns:local=&quot;using:MyMauiApp&quot;&gt;</span><br><span class="line">  ...</span><br><span class="line">&lt;/ContentPage&gt;</span><br></pre></td></tr></table></figure>

<p>在以下例子中，我们可看到如何在 XAML 中引用在同程序集下的 C# 文件中定义的命名空间：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Monkey.cs</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">MonkeyFinder.Model</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Monkey</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Location &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Details &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Image &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Population &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">double</span> Latitude &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">double</span> Longitude &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- MainPage.xaml --&gt;</span><br><span class="line">&lt;ContentPage xmlns=&quot;http://schemas.microsoft.com/dotnet/2021/maui&quot;</span><br><span class="line">             xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;</span><br><span class="line">             x:Class=&quot;MonkeyFinder.View.MainPage&quot;</span><br><span class="line">             xmlns:model=&quot;clr-namespace:MonkeyFinder.Model&quot;&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;/ContentPage&gt;</span><br></pre></td></tr></table></figure>



<p><strong>引用其他程序集中的命名空间：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;ContentPage ... xmlns:custom=&quot;clr-namespace:CustomNamespace;assembly=CustomAssembly&quot;&gt;</span><br><span class="line">...</span><br><span class="line">&lt;/ContentPage&gt;</span><br></pre></td></tr></table></figure>

<p>在这里，<code>custom</code>是自行定义的前缀，<code>CustomNamespace</code>是要引用的命名空间的名称，<code>CustomAssembly</code>是包含这个命名空间的程序集的名称。在之后可以使用<code>custom</code>这个前缀来引用这个命名空间中的类型，例如<code>&lt;custom:CustomType /&gt;</code>。</p>
<h4 id="标记拓展"><a href="#标记拓展" class="headerlink" title="标记拓展"></a>标记拓展</h4><p>将在<strong>数据绑定</strong>一节详细展开</p>
<h4 id="XAML热重载"><a href="#XAML热重载" class="headerlink" title="XAML热重载"></a>XAML热重载</h4><p>XAML 热重载是一项 Visual Studio 功能，可用于查看正在运行的应用中 XAML 更改的结果，而无需重新生成项目。 如果没有 XAML 热重载，每次要查看 XAML 更改结果时，都需要生成和部署应用。</p>
<p>当 .NET MAUI 应用连接了调试器并在调试配置下运行时，XAML 热重载会分析 XAML 编辑内容，并将相关更改发送到正在运行的应用。 由于它不会为整个页面重新创建 UI，因此会保留 UI 状态，并更新受编辑影响的控件上被更改的属性。 此外，可保持导航状态和数据，这样既可快速迭代 UI，又不影响在应用中的即时位置。 因此，可减少重新生成和部署应用以验证 UI 更改的时间。</p>
<h3 id="MAUI页面设计"><a href="#MAUI页面设计" class="headerlink" title="MAUI页面设计"></a>MAUI页面设计</h3><h4 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h4><ul>
<li><h5 id="Label"><a href="#Label" class="headerlink" title="Label"></a>Label</h5><p>Label可用于显示带有修饰的文本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 创建标签 --&gt;</span><br><span class="line">&lt;Label Text=&quot;Hello world&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 设置颜色 --&gt;</span><br><span class="line">&lt;Label TextColor=&quot;#77d065&quot;</span><br><span class="line">       Text=&quot;This is a green label.&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;Label TextColor=&quot;Green&quot;</span><br><span class="line">       Text=&quot;This is a green label.&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 添加换行 --&gt;</span><br><span class="line">&lt;Label Text=&quot;First line &amp;#10; Second line&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;Label&gt;</span><br><span class="line">    &lt;Label.Text&gt;</span><br><span class="line">        First line</span><br><span class="line">        Second line</span><br><span class="line">    &lt;/Label.Text&gt;</span><br><span class="line">&lt;/Label&gt;</span><br></pre></td></tr></table></figure>



<p>Label 具有 <code>FormattedText</code> 属性，该属性允许在同一视图中显示具有多个字体和颜色的文本。 <code>FormattedText</code> 属性是 <code>FormattedString</code> 类型，由一个或多个 Span 实例组成，通过 <code>Spans</code> 属性设置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 使用格式化文本 --&gt;</span><br><span class="line">&lt;Label LineBreakMode=&quot;WordWrap&quot;&gt;</span><br><span class="line">    &lt;Label.FormattedText&gt;</span><br><span class="line">        &lt;FormattedString&gt;</span><br><span class="line">            &lt;Span Text=&quot;Red Bold, &quot; TextColor=&quot;Red&quot; FontAttributes=&quot;Bold&quot; /&gt;</span><br><span class="line">            &lt;Span Text=&quot;default, &quot; FontFamily=&quot;OpenSansSemiBold&quot; FontSize=&quot;14&quot; /&gt;</span><br><span class="line">            &lt;Span Text=&quot;default, &quot; FontFamily=&quot;OpenSansRegular&quot; FontSize=&quot;14&quot; </span><br><span class="line">                  TextDecorations=&quot;Underline&quot; /&gt;</span><br><span class="line">            &lt;Span Text=&quot;italic small.&quot; FontAttributes=&quot;Italic&quot; FontSize=&quot;12&quot; /&gt;</span><br><span class="line">        &lt;/FormattedString&gt;</span><br><span class="line">    &lt;/Label.FormattedText&gt;</span><br><span class="line">&lt;/Label&gt;</span><br></pre></td></tr></table></figure>


</li>
<li><p>BoxView</p>
<p>BoxView 可绘制具有指定宽度、高度和颜色的简单矩形或正方形。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;BoxView Color=&quot;CornflowerBlue&quot;</span><br><span class="line">             CornerRadius=&quot;10&quot;</span><br><span class="line">             WidthRequest=&quot;160&quot;</span><br><span class="line">             HeightRequest=&quot;160&quot;</span><br><span class="line">             VerticalOptions=&quot;Center&quot;</span><br><span class="line">             HorizontalOptions=&quot;Center&quot; /&gt;</span><br></pre></td></tr></table></figure>


</li>
<li><p>Border</p>
<p>要绘制边框，可创建一个 Border 对象并设置其属性以定义外观，然后将其子级设置为要添加边框的控件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;Border Stroke=&quot;#C49B33&quot;</span><br><span class="line">        StrokeThickness=&quot;4&quot;</span><br><span class="line">        StrokeShape=&quot;RoundRectangle 40,0,0,40&quot;</span><br><span class="line">        Background=&quot;#2B0B98&quot;</span><br><span class="line">        Padding=&quot;16,8&quot;</span><br><span class="line">        HorizontalOptions=&quot;Center&quot;&gt;</span><br><span class="line">    &lt;Label Text=&quot;.NET MAUI&quot;</span><br><span class="line">           TextColor=&quot;White&quot;</span><br><span class="line">           FontSize=&quot;18&quot;</span><br><span class="line">           FontAttributes=&quot;Bold&quot; /&gt;</span><br><span class="line">&lt;/Border&gt;</span><br></pre></td></tr></table></figure>


</li>
<li><p>Image</p>
<p>Image 显示可从本地文件、URI 或流加载的图像。 支持动画 GIF 等标准平台图像格式，还支持本地可缩放矢量图形 (SVG) 文件</p>
<p>右键Resources&#x2F;Images文件夹，选择添加-现有项-右下角文件类型选择所有文件-选择一个图片文件（文件名需小写）</p>
<img src="image-20240128140235212.png" alt="image-20240128140235212" style="zoom: 67%;" />

<img src="image-20240128140154963.png" alt="image-20240128140154963" style="zoom:80%;" />



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 使用maui自带的dotnet_bot图片 --&gt;</span><br><span class="line">&lt;Image Source=&quot;dotnet_bot.png&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 把Source改为自己的图片 --&gt;</span><br><span class="line">&lt;Image Source=&quot;eesastlogo.png&quot; WidthRequest=&quot;100&quot; HeightRequest=&quot;100&quot;/&gt;</span><br></pre></td></tr></table></figure>



<p>控制图像缩放</p>
<p><code>Aspect</code> 属性确定如何缩放图像以适合显示区域，并应设置为 <code>Aspect</code> 枚举的其中一个成员：</p>
<ul>
<li><code>AspectFit</code> - 对图像上下加框（如需要），以使整个图像适合显示区域，并根据图像的宽度或高度，在顶部&#x2F;底部或侧边添加空白区域。</li>
<li><code>AspectFill</code> - 剪裁图像，使其填充显示区域，同时保持纵横比。</li>
<li><code>Fill</code> - 拉伸图像，以完全、准确填充显示区域。 这可能会导致图像失真。</li>
<li><code>Center</code> - 将图像在显示区域居中显示，同时保持纵横比。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 控制图像缩放 --&gt;</span><br><span class="line">&lt;Image Source=&quot;eesastlogo.png&quot; HeightRequest=&quot;100&quot; WidthRequest=&quot;200&quot; Aspect=&quot;Fill&quot; /&gt;</span><br></pre></td></tr></table></figure>


</li>
<li><p>Button</p>
<p>Button 可显示文本并响应指示应用执行任务的点击或单击操作。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button Text=&quot;Click The Button&quot;</span><br><span class="line">        VerticalOptions=&quot;Center&quot;</span><br><span class="line">        HorizontalOptions=&quot;Center&quot;</span><br><span class="line">        Clicked=&quot;OnButtonClicked&quot; /&gt;</span><br><span class="line">&lt;Label x:Name=&quot;label&quot;</span><br><span class="line">        Text=&quot;Click Counter&quot;</span><br><span class="line">        FontSize=&quot;18&quot;</span><br><span class="line">        VerticalOptions=&quot;Center&quot;</span><br><span class="line">        HorizontalOptions=&quot;Center&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p>同时，在<code>MainPage.xaml.cs</code>的<code>MainPage</code>类中添加以下内容：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnButtonClicked</span>(<span class="params"><span class="built_in">object</span> sender, EventArgs e</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    count++;</span><br><span class="line">    <span class="keyword">if</span> (count == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        label.Text = <span class="string">&quot;Have Clicked &quot;</span> + count.ToString() + <span class="string">&quot; Time&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        label.Text = <span class="string">&quot;Have Clicked &quot;</span> + count.ToString() + <span class="string">&quot; Times&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
<li><p>ListView</p>
<p>将在<strong>数据拓展</strong>一节详细展开</p>
</li>
</ul>
<h4 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h4><p>布局类允许在应用程序中排列 UI 控件并对其进行分组。 选择布局类需要了解布局如何定位其子元素，以及布局如何调整其子元素的大小。 此外，可能还需要嵌套布局来创建所需的布局。</p>
<p><img src="https://learn.microsoft.com/zh-cn/dotnet/maui/user-interface/layouts/media/layouts.png?view=net-maui-8.0" alt=".NET MAUI layout classes."></p>
<ul>
<li><p>StackLayout</p>
<p>StackLayout 在水平或垂直方向上组织一维堆栈中的元素。 默认情况下，StackLayout 是垂直方向。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;StackLayout Margin=&quot;20&quot;</span><br><span class="line">  Spacing=&quot;6&quot;&gt;</span><br><span class="line">    &lt;Label Text=&quot;Veritical&quot; /&gt;</span><br><span class="line">    &lt;BoxView Color=&quot;Red&quot;</span><br><span class="line">     HeightRequest=&quot;40&quot;</span><br><span class="line">     WidthRequest=&quot;400&quot;</span><br><span class="line">     HorizontalOptions=&quot;Start&quot;/&gt;</span><br><span class="line">    &lt;BoxView Color=&quot;Yellow&quot;</span><br><span class="line">     HeightRequest=&quot;40&quot;</span><br><span class="line">     WidthRequest=&quot;400&quot;</span><br><span class="line">     HorizontalOptions=&quot;Center&quot;/&gt;</span><br><span class="line">    &lt;BoxView Color=&quot;Blue&quot;</span><br><span class="line">     HeightRequest=&quot;40&quot; </span><br><span class="line">     WidthRequest=&quot;400&quot;</span><br><span class="line">     HorizontalOptions=&quot;End&quot;/&gt;</span><br><span class="line">&lt;/StackLayout&gt;</span><br><span class="line">&lt;StackLayout Margin=&quot;20&quot; HeightRequest=&quot;300&quot;</span><br><span class="line">             Spacing=&quot;100&quot; Orientation=&quot;Horizontal&quot;&gt;</span><br><span class="line">    &lt;Label Text=&quot;Horizontal&quot; /&gt;</span><br><span class="line">    &lt;BoxView Color=&quot;Red&quot;</span><br><span class="line">  	 HeightRequest=&quot;200&quot;</span><br><span class="line">     WidthRequest=&quot;40&quot;</span><br><span class="line">     VerticalOptions=&quot;Start&quot;/&gt;</span><br><span class="line">    &lt;BoxView Color=&quot;Yellow&quot;</span><br><span class="line">	 HeightRequest=&quot;200&quot;</span><br><span class="line"> 	 WidthRequest=&quot;40&quot;</span><br><span class="line">	 VerticalOptions=&quot;Center&quot;/&gt;</span><br><span class="line">    &lt;BoxView Color=&quot;Blue&quot;</span><br><span class="line"> 	 HeightRequest=&quot;200&quot; </span><br><span class="line"> 	 WidthRequest=&quot;40&quot;</span><br><span class="line"> 	 VerticalOptions=&quot;End&quot;/&gt;</span><br><span class="line">&lt;/StackLayout&gt;</span><br></pre></td></tr></table></figure>


</li>
<li><p>Grid</p>
<p>Grid 提供网格化的布局形式，它将其子级组织为可以有比例大小或绝对大小的行和列。</p>
<ul>
<li><p>创建Grid</p>
<p>可以使用 <code>RowDefinitions</code> 和 <code>ColumnDefinitions</code> 属性定义Grid 的布局行为，这两个属性分别是 <code>RowDefinition</code> 和 <code>ColumnDefinition</code> 对象的集合。 这些集合定义 Grid 的行和列特征，并且应针对 Grid 中的每一行包含一个 <code>RowDefinition</code> 对象，以及针对 Grid 中的每一列包含一个 <code>ColumnDefinition</code> 对象。</p>
<p><code>RowDefinition</code> 类定义类型为 <code>GridLength</code> 的 <code>Height</code> 属性，而 <code>ColumnDefinition</code> 类定义类型为 <code>GridLength</code> 的 <code>Width</code> 属性。 <code>GridLength</code> 结构根据 <code>GridUnitType</code> 枚举指定行高或列宽，其中有三个成员：</p>
<ul>
<li><code>Absolute</code> – 行高或列宽的值采用与设备无关的单位（XAML 中的数字）。</li>
<li><code>Auto</code> – 根据单元格内容自动调整行高或列宽（XAML 中的 <code>Auto</code>）。</li>
<li><code>Star</code> – 按比例分配剩余行高或列宽（在 XAML 中，数字后跟 <code>*</code>）。</li>
</ul>
</li>
<li><p>将子视图包含于Grid单元格中</p>
<p>可以将子视图放置在包含 <code>Grid.Column</code> 和 <code>Grid.Row</code> 附加属性的特定 Grid单元格中。此外，要使子视图跨越多个行和列，请使用 <code>Grid.RowSpan</code> 和 <code>Grid.ColumnSpan</code> 附加属性。</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;Grid&gt;</span><br><span class="line">    &lt;Grid.RowDefinitions&gt;</span><br><span class="line">        &lt;RowDefinition Height=&quot;2*&quot; /&gt;</span><br><span class="line">        &lt;RowDefinition Height=&quot;*&quot; /&gt;</span><br><span class="line">        &lt;RowDefinition Height=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;/Grid.RowDefinitions&gt;</span><br><span class="line">    &lt;Grid.ColumnDefinitions&gt;</span><br><span class="line">        &lt;ColumnDefinition Width=&quot;100&quot;/&gt;</span><br><span class="line">        &lt;ColumnDefinition /&gt;</span><br><span class="line">    &lt;/Grid.ColumnDefinitions&gt;</span><br><span class="line">    &lt;BoxView Color=&quot;Green&quot; /&gt;</span><br><span class="line">    &lt;Label Text=&quot;Row 0, Column 0&quot;</span><br><span class="line">           HorizontalOptions=&quot;Center&quot;</span><br><span class="line">           VerticalOptions=&quot;Center&quot; /&gt;</span><br><span class="line">    &lt;BoxView Grid.Column=&quot;1&quot;</span><br><span class="line">             Color=&quot;Blue&quot; /&gt;</span><br><span class="line">    &lt;Label Grid.Column=&quot;1&quot;</span><br><span class="line">           Text=&quot;Row 0, Column 1&quot;</span><br><span class="line">           HorizontalOptions=&quot;Center&quot;</span><br><span class="line">           VerticalOptions=&quot;Center&quot; /&gt;</span><br><span class="line">    &lt;BoxView Grid.Row=&quot;1&quot;</span><br><span class="line">             Color=&quot;Teal&quot; /&gt;</span><br><span class="line">    &lt;Label Grid.Row=&quot;1&quot;</span><br><span class="line">           Text=&quot;Row 1, Column 0&quot;</span><br><span class="line">           HorizontalOptions=&quot;Center&quot;</span><br><span class="line">           VerticalOptions=&quot;Center&quot; /&gt;</span><br><span class="line">    &lt;BoxView Grid.Row=&quot;1&quot;</span><br><span class="line">             Grid.Column=&quot;1&quot;</span><br><span class="line">             Color=&quot;Purple&quot; /&gt;</span><br><span class="line">    &lt;Label Grid.Row=&quot;1&quot;</span><br><span class="line">           Grid.Column=&quot;1&quot;</span><br><span class="line">           Text=&quot;Row1, Column 1&quot;</span><br><span class="line">           HorizontalOptions=&quot;Center&quot;</span><br><span class="line">           VerticalOptions=&quot;Center&quot; /&gt;</span><br><span class="line">    &lt;BoxView Grid.Row=&quot;2&quot;</span><br><span class="line">             Grid.ColumnSpan=&quot;2&quot;</span><br><span class="line">             Color=&quot;Red&quot; /&gt;</span><br><span class="line">    &lt;Label Grid.Row=&quot;2&quot;</span><br><span class="line">           Grid.ColumnSpan=&quot;2&quot;</span><br><span class="line">           Text=&quot;Row 2, Columns 0 and 1&quot;</span><br><span class="line">           HorizontalOptions=&quot;Center&quot;</span><br><span class="line">           VerticalOptions=&quot;Center&quot; /&gt;</span><br><span class="line">&lt;/Grid&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="MAUI数据绑定"><a href="#MAUI数据绑定" class="headerlink" title="MAUI数据绑定"></a>MAUI数据绑定</h3><h4 id="绑定的概念"><a href="#绑定的概念" class="headerlink" title="绑定的概念"></a>绑定的概念</h4><p>数据绑定是将两个对象的属性链接起来的技术，其中一个属性的更改会自动反映在另一个属性中。 数据绑定涉及两个对象，其中一个几乎总是从View派生的元素，并构成页面可视界面的一部分。 另一个对象则是：</p>
<ul>
<li>派生自另一个View，且通常位于同一页面。</li>
<li>或是代码文件中的对象。</li>
</ul>
<h4 id="目标和源"><a href="#目标和源" class="headerlink" title="目标和源"></a>目标和源</h4><p>.NET Multi-platform App UI (.NET MAUI) 数据绑定在两个对象之间链接一对属性，其中至少一个对象通常是用户界面对象。 这两个对象称为“目标”和“源”：</p>
<ul>
<li>“目标”是设置数据要绑定的对象（和属性）。</li>
<li>“源”是数据绑定引用的对象（和属性）。</li>
</ul>
<h4 id="XAML中的标记拓展"><a href="#XAML中的标记拓展" class="headerlink" title="XAML中的标记拓展"></a>XAML中的标记拓展</h4><p>XAML 标记扩展支持从各种源设置元素属性，从而帮助增强 XAML 的功能和灵活性。</p>
<p>例如，通常会按如下设置<code>Color</code> 属性：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;BoxView Color=&quot;Blue&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p>标记扩展是表达元素属性的另一种方法，这为我们提供了一种从已创建的变量、页面其它元素等其它途径设置<code>Color</code>属性的方法。 .NET MAUI XAML 标记扩展通常由括在大括号中的属性值标识：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;BoxView Color=&quot;&#123;StaticResource themeColor&#125;&quot; /&gt;</span><br></pre></td></tr></table></figure>



<p>.NET MAUI 中包含的主要标记拓展有：</p>
<ul>
<li><p><code>x:Static</code> 标记扩展：该类具有类型为 <code>string</code> 的名为 <code>Member</code> 的单一属性，你可以将其设置为公共常量、静态属性、静态字段或枚举成员的名称。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">MarkupExtensions</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title">AppConstants</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">double</span> NormalFontSize = <span class="number">18</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;ContentPage xmlns=&quot;http://schemas.microsoft.com/dotnet/2021/maui&quot;</span><br><span class="line">             xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;</span><br><span class="line">             xmlns:local=&quot;clr-namespace:MarkupExtensions&quot;</span><br><span class="line">             x:Class=&quot;MarkupExtensions.StaticDemoPage&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;Label Text=&quot;Label No. 3&quot;</span><br><span class="line">       FontSize=&quot;&#123;x:Static Member=local:AppConstants.NormalFontSize&#125;&quot; /&gt;</span><br><span class="line">...</span><br><span class="line">&lt;/ContentPage&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


</li>
<li><p><code>x:Reference</code> 标记拓展： 该类具有 <code>string</code> 类型的名为 <code>Name</code> 的单一属性，可以将其设置为页面上已使用 <code>x:Name</code> 命名的元素的名称。</p>
</li>
<li><p><code>x:Binding</code> 标记拓展：具体的实现绑定方式，将目标对象与源的属性实现绑定。</p>
<ol>
<li>将目标对象的 <code>BindingContext</code> 属性设置为源对象</li>
<li>在目标对象上调用 <code>SetBinding</code> 方法（通常与 <code>Binding</code> 类结合使用），将该对象的属性绑定到源对象的属性</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;StackLayout&gt;</span><br><span class="line">    &lt;Label Text=&quot;ROTATION&quot;</span><br><span class="line">           BindingContext=&quot;&#123;x:Reference slider&#125;&quot;</span><br><span class="line">           Rotation=&quot;&#123;Binding Path=Value&#125;&quot;</span><br><span class="line">           FontAttributes=&quot;Bold&quot;</span><br><span class="line">           FontSize=&quot;18&quot;</span><br><span class="line">           HorizontalOptions=&quot;Center&quot;</span><br><span class="line">           VerticalOptions=&quot;Center&quot; /&gt;</span><br><span class="line">    &lt;Slider x:Name=&quot;slider&quot;</span><br><span class="line">            Maximum=&quot;360&quot;</span><br><span class="line">            VerticalOptions=&quot;Center&quot; /&gt;</span><br><span class="line">    &lt;Label BindingContext=&quot;&#123;x:Reference slider&#125;&quot;</span><br><span class="line">           Text=&quot;&#123;Binding Value, StringFormat=&#x27;The angle is &#123;0:F0&#125; degrees&#x27;&#125;&quot;</span><br><span class="line">           FontAttributes=&quot;Bold&quot;</span><br><span class="line">           FontSize=&quot;18&quot;</span><br><span class="line">           HorizontalOptions=&quot;Center&quot;</span><br><span class="line">           VerticalOptions=&quot;Center&quot; /&gt;</span><br><span class="line">&lt;/StackLayout&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><p><code>x:Type</code> 标记拓展：标记扩展返回该类或结构的类型，通常与 <code>x:Array</code> 搭配使用。</p>
</li>
<li><p><code>x:Array</code>标记拓展：在标记中定义数组。</p>
<p>ListView：在<code>ItemSource</code>中定义要显示的项目集合，在<code>ItemTemplate</code>中用于指定显示每个项目模板（类型为<code>DataTemplate</code>）</p>
<p>ListView 中每个项的外观由 <code>DataTemplate</code> 定义，且 <code>DataTemplate</code> 必须引用 <code>Cell</code> 类来显示项。 每个单元格表示 ListView 中的数据项。 .NET MAUI 包含以下内置单元格：</p>
<ul>
<li><code>TextCell</code>，用于在单独的行上显示主要文本和辅助文本。</li>
<li><code>ImageCell</code>，用于在单独的行上显示带有主要文本和辅助文本的图像。</li>
<li><code>SwitchCell</code>（不常用），用于显示文本以及可打开或关闭的开关。</li>
<li><code>EntryCell</code>（不常用），用于显示可编辑的标签和文本。</li>
<li><code>ViewCell</code>，是一个自定义单元格，其外观由 View（也就是之前所讲的视图和布局的组合） 定义。 如果要完全定义 ListView 中每个项的外观，则应使用此单元格类型。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;ListView Margin=&quot;10&quot;&gt;</span><br><span class="line">    &lt;ListView.ItemsSource&gt;</span><br><span class="line">        &lt;x:Array Type=&quot;&#123;x:Type Color&#125;&quot;&gt;</span><br><span class="line">            &lt;Color&gt;Aqua&lt;/Color&gt;</span><br><span class="line">            &lt;Color&gt;Black&lt;/Color&gt;</span><br><span class="line">            &lt;Color&gt;Blue&lt;/Color&gt;</span><br><span class="line">            &lt;Color&gt;Fuchsia&lt;/Color&gt;</span><br><span class="line">            &lt;Color&gt;Gray&lt;/Color&gt;</span><br><span class="line">            &lt;Color&gt;Green&lt;/Color&gt;</span><br><span class="line">            &lt;Color&gt;Lime&lt;/Color&gt;</span><br><span class="line">            &lt;Color&gt;Maroon&lt;/Color&gt;</span><br><span class="line">            &lt;Color&gt;Navy&lt;/Color&gt;</span><br><span class="line">            &lt;Color&gt;Olive&lt;/Color&gt;</span><br><span class="line">            &lt;Color&gt;Pink&lt;/Color&gt;</span><br><span class="line">            &lt;Color&gt;Purple&lt;/Color&gt;</span><br><span class="line">            &lt;Color&gt;Red&lt;/Color&gt;</span><br><span class="line">            &lt;Color&gt;Silver&lt;/Color&gt;</span><br><span class="line">            &lt;Color&gt;Teal&lt;/Color&gt;</span><br><span class="line">            &lt;Color&gt;White&lt;/Color&gt;</span><br><span class="line">            &lt;Color&gt;Yellow&lt;/Color&gt;</span><br><span class="line">        &lt;/x:Array&gt;</span><br><span class="line">    &lt;/ListView.ItemsSource&gt;</span><br><span class="line">    &lt;ListView.ItemTemplate&gt;</span><br><span class="line">        &lt;DataTemplate&gt;</span><br><span class="line">            &lt;ViewCell&gt;</span><br><span class="line">                &lt;BoxView Color=&quot;&#123;Binding&#125;&quot;</span><br><span class="line">                         HeightRequest=&quot;10&quot;</span><br><span class="line">                         Margin=&quot;3&quot; /&gt;</span><br><span class="line">            &lt;/ViewCell&gt;</span><br><span class="line">        &lt;/DataTemplate&gt;</span><br><span class="line">    &lt;/ListView.ItemTemplate&gt;</span><br><span class="line">&lt;/ListView&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="绑定模式"><a href="#绑定模式" class="headerlink" title="绑定模式"></a>绑定模式</h4><ul>
<li><code>Default</code>-目标自身的默认绑定模式</li>
<li><code>OneWay</code> - 数据从源到目标单向传输</li>
<li><code>OneWayToSource</code> - 数据从目标到源单向传输</li>
<li><code>TwoWay</code> - 数据在源和目标之间双向传输</li>
<li><code>OneTime</code> - 数据从源到目标单向传输，但只有 <code>BindingContext</code> 发生更改时才会传输</li>
</ul>
<h2 id="MVVM设计模式"><a href="#MVVM设计模式" class="headerlink" title="MVVM设计模式"></a>MVVM设计模式</h2><h3 id="MVVM模式的组成部分"><a href="#MVVM模式的组成部分" class="headerlink" title="MVVM模式的组成部分"></a>MVVM模式的组成部分</h3><p>MVVM是Model-View-ViewModel的缩写，目的是更好地分离前后端，降低代码的耦合程度。</p>
<p>MVVM 模式中有三个核心组件：模型（Model）、视图（View）和视图模型（View Model）。以下示意图显示了这三个组件之间的关系。</p>
<p><img src="https://learn.microsoft.com/zh-cn/dotnet/maui/tutorials/notes-mvvm/media/mvvm/mvvm-pattern.png?view=net-maui-8.0" alt="A diagram demonstrating the parts of an MVVM-modeled application"></p>
<ul>
<li>View：负责定义用户在屏幕上看到的结构、布局和外观。 （纯前端外观）</li>
<li>View Model：实现视图可以数据绑定到的属性和命令，并通过更改通知事件通知视图任何状态更改。 （存了所有View中需要显示的东西）</li>
<li>Model：封装应用数据的非可视类，通常包括数据模型以及业务和验证逻辑。（View Model以外的其它类和数据）</li>
</ul>
<h3 id="MVVM案例分析：猴子查看软件"><a href="#MVVM案例分析：猴子查看软件" class="headerlink" title="MVVM案例分析：猴子查看软件"></a>MVVM案例分析：猴子查看软件</h3><h2 id="相关教程"><a href="#相关教程" class="headerlink" title="相关教程"></a>相关教程</h2><p>微软官方教程：<a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/dotnet/maui/what-is-maui?view=net-maui-8.0">什么是 .NET MAUI？ - .NET MAUI | Microsoft Learn</a></p>
<p>一个超赞的MAUI workshop，可能需要一些C#和多线程基础：<a target="_blank" rel="noopener" href="https://github.com/dotnet-presentations/dotnet-maui-workshop">dotnet-presentations&#x2F;dotnet-maui-workshop(github.com)</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://grange007.github.io/2022/10/22/HelloWorld/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Grange">
      <meta itemprop="description" content="CAUTION WET FLOOR">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Grange's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/22/HelloWorld/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-10-22 22:38:03" itemprop="dateCreated datePublished" datetime="2022-10-22T22:38:03+08:00">2022-10-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-11-04 14:44:56" itemprop="dateModified" datetime="2023-11-04T14:44:56+08:00">2023-11-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="我的心灵家园"><a href="#我的心灵家园" class="headerlink" title="我的心灵家园"></a>我的心灵家园</h2><p>这里是Grange的博客网站。<br>始建于2022年10月22日，在2023年5月19日被翻修，正式投入使用。</p>
<p align = "right"> 2023年5月20日凌晨</p>
<p align = "right"> 于清华园 </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Grange"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Grange</p>
  <div class="site-description" itemprop="description">CAUTION WET FLOOR</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">4</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Grange</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
